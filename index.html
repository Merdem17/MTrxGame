<!-- v2 update -->
<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Ta≈ü Oyunu - Kazƒ±m Sistemi</title>
  <style>
    body { 
      margin:0; 
      overflow:hidden; 
      background:black; 
      display:flex; 
      justify-content:center; 
      align-items:center; 
      height:100vh;
      flex-direction:column;
    }
    canvas { 
      background:black; 
      display:none; 
      border:4px solid #555; 
      box-shadow:0 0 20px rgba(255,255,255,0.2); 
    }
    #ui {
      position:absolute; 
      top:20px; 
      left:50%; 
      transform:translateX(-50%);
      color:white;
      font-family:sans-serif; 
      font-size:20px;
      display:none;
    }
    #levelUp {
      position:absolute; 
      top:50%; 
      left:50%; 
      transform:translate(-50%, -50%);
      color:lime; 
      font-size:48px; 
      font-weight:bold;
      text-shadow:0 0 15px #0f0;
      display:none;
      font-family:sans-serif;
    }
    #restart {
      position:absolute; 
      top:50%; 
      left:50%; 
      transform:translate(-50%, -50%);
      padding:15px 30px; 
      font-size:24px; 
      display:none;
      background:#444; 
      color:white; 
      border:none; 
      border-radius:10px; 
      cursor:pointer;
    }
    #restart:hover { background:#666; }

    /* Saƒü √ºst bilgi */
    #miningStats {
      position:absolute;
      top:20px;
      right:20px;
      background:#111;
      color:white;
      padding:10px 20px;
      border:2px solid #555;
      border-radius:10px;
      font-family:sans-serif;
      font-size:18px;
      display:none;
    }
  </style>
</head>
<body>
  <div id="menu">
    <button class="menu-btn" onclick="startGame(800,600)">800 x 600 Ba≈ülat</button>
    <button class="menu-btn" onclick="startGame(1024,768)">1024 x 768 Ba≈ülat</button>
  </div>

  <div id="miningStats">
    ‚õèÔ∏è Kazƒ±m G√ºc√º: <span id="kazimGucu">0.00000000000</span><br>
    üí∞ Mevcut Kazƒ±m: <span id="mevcutKazim">0.00000000000</span>
  </div>

  <div id="levelUp">LEVEL UP!</div>
  <button id="restart">Yeniden Ba≈ülat</button>
  <canvas id="gameCanvas"></canvas>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const miningStats = document.getElementById("miningStats");
    const kazimGucuEl = document.getElementById("kazimGucu");
    const mevcutKazimEl = document.getElementById("mevcutKazim");
    const menu = document.getElementById("menu");

    let kazimGucu = parseFloat(localStorage.getItem("kazimGucu")) || 0;
    let mevcutKazim = parseFloat(localStorage.getItem("mevcutKazim")) || 0;
    let lastUpdate = parseInt(localStorage.getItem("lastUpdate")) || Date.now();

    const images = {
      stone: new Image(),
      silver: new Image(),
      gold: new Image(),
      red: new Image()
    };
    images.stone.src = "stone.png";
    images.silver.src = "silver.png";
    images.gold.src = "gold.png";
    images.red.src = "red.png";

    class Rock {
      constructor(type) {
        this.type = type;
        this.size = Math.random() < 0.7 ? 60 : 90;
        this.speed = this.size === 60 ? 2 : 1.2;
        this.x = Math.random() * (canvas.width - this.size);
        this.y = -this.size;
      }
      update() { this.y += this.speed; }
      draw() { ctx.drawImage(images[this.type], this.x, this.y, this.size, this.size); }
    }

    let rocks = [];

    function spawnRock() {
      let type = "stone";
      if (Math.random() < 0.15) type = "silver";
      if (Math.random() < 0.05) type = "gold";
      if (Math.random() < 0.1) type = "red";
      rocks.push(new Rock(type));
    }

    function updateStats() {
      kazimGucuEl.textContent = kazimGucu.toFixed(11);
      mevcutKazimEl.textContent = mevcutKazim.toFixed(11);
    }

    function saveProgress() {
      localStorage.setItem("kazimGucu", kazimGucu);
      localStorage.setItem("mevcutKazim", mevcutKazim);
      localStorage.setItem("lastUpdate", Date.now());
    }

    function gameLoop() {
      ctx.clearRect(0,0,canvas.width,canvas.height);

      if (Math.random() < 0.02) spawnRock();
      rocks.forEach((rock,i) => {
        rock.update();
        rock.draw();
        if (rock.y > canvas.height) rocks.splice(i,1);
      });

      // otomatik kazƒ±m
      let now = Date.now();
      let delta = (now - lastUpdate) / 1000;
      mevcutKazim += kazimGucu * delta;
      lastUpdate = now;
      updateStats();
      saveProgress();

      requestAnimationFrame(gameLoop);
    }

    canvas.addEventListener("click", (e) => {
      const rect = canvas.getBoundingClientRect();
      const mx = e.clientX - rect.left;
      const my = e.clientY - rect.top;
      rocks.forEach((rock,i) => {
        if (mx>rock.x && mx<rock.x+rock.size && my>rock.y && my<rock.y+rock.size) {
          if (rock.type==="stone") kazimGucu += 0.0000000001;
          if (rock.type==="silver") kazimGucu += 0.0000000010;
          if (rock.type==="gold") kazimGucu += 0.0000000100;
          if (rock.type==="red") kazimGucu *= 0.5;
          rocks.splice(i,1);
        }
      });
    });

    function startGame(width,height) {
      canvas.width = width;
      canvas.height = height;
      canvas.style.display="block";
      menu.style.display="none";
      miningStats.style.display="block";

      // offline kazan√ß ekle
      let now = Date.now();
      let delta = (now - lastUpdate) / 1000;
      mevcutKazim += kazimGucu * delta;
      lastUpdate = now;

      updateStats();
      requestAnimationFrame(gameLoop);
    }
  </script>
</body>
</html>
